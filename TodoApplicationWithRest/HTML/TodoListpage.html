<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TodoListPage</title>
    <script src="../Plugins/jquery.min.js"></script>
    <script src="../Plugins/knockout-3.5.1.js"></script>
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
    </style>
    <script type="text/javascript" src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>


    <link rel="stylesheet" href="../CSS/TodoListpageCSS.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light " style="margin-bottom: 1cm;">
        <a class="navbar-brand" href="../HTML/RegistrationPage.html">
            <h1 style="color: ivory">Todo Application</h1>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
            <ul class="navbar-nav">

                <li class="nav-item">
                    <a class="navbar-brand" href="../HTML/LoginPage.html" onclick="return logout()">
                        <h1 style="color: black;">Logout<a class="fa fa-"></a> </h1>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col">
                <div class="card card-registration my-4">
                    <div class="row g-0">
                        <div class="col-xl-6 d-none d-xl-block"
                            style="background-image: url(../Images/AdminImage.jpg); filter: blur(2px);">
                        </div>
                        <div class="col-xl-6">
                            <div class="card-body p-md-5 text-black">
                                <h3 style="color: rgb(126, 139, 51);">Add New Todo
                                </h3>

                                <p><br></p>
                                <form>
                                    <div class="row">
                                        <div class="form-outline mb-4">
                                            <label class="form-label" style="font-weight: bold;"
                                                for="form3Example99">Todo
                                                Name</label>
                                            <input type="text" id="form3Example1m" class="form-control form-control-lg"
                                                data-bind="value:todoName,valueupdate:'keypress'"
                                                placeholder="Enter Todo Name" required />
                                        </div>

                                    </div>
                                    <div class="form-outline mb-4">
                                        <label class="form-label" style="font-weight: bold;"
                                            for="form3Example99">Description</label>
                                        <textarea id="form3Example1n" rows="5" cols="50"
                                            class="form-control form-control-lg" class="form-control"
                                            data-bind="value:description,valueupdate:'keypress'"
                                            placeholder="Add Todo Description here" required></textarea>
                                    </div>

                                    <div class="form-outline mb-4">
                                        <label class="form-label" style="font-weight: bold;"
                                            for="form3Example9">Completion
                                            Date </label>
                                        <input type="date" id="myDate" class="form-control form-control-lg"
                                            data-bind="value: completionDate,valueupdate:'keypress'"
                                            data-date-format="YYYY MM DD" required />
                                    </div>

                                    <div class="d-md-flex justify-content-start align-items-center mb-4 py-2">

                                        <h6 class="mb-0 me-4" style="font-weight: bold;">Priority : </h6>

                                        <div class="form-check form-check-inline mb-0 me-4">
                                            <input type="radio" class="form-check-input" value="low"
                                                data-bind="checked:priority,valueupdate:'keypress'" name="priority"
                                                required />
                                            <label class="form-check-label">Low</label>
                                        </div>

                                        <div class="form-check form-check-inline mb-0 me-4">
                                            <input type="radio" class="form-check-input" value="medium"
                                                data-bind="checked:priority,valueupdate:'keypress'" name="priority"
                                                required />
                                            <label class="form-check-label">Medium</label>
                                        </div>

                                        <div class="form-check form-check-inline mb-0 me-4">
                                            <input type="radio" class="form-check-input" value="high"
                                                data-bind="checked:priority,valueupdate:'keypress'" name="priority"
                                                required />
                                            <label class="form-check-label">High</label>
                                        </div>
                                    </div>

                                    <button type="button" class="btn btn-warning btn-lg ms-2"
                                        data-bind="click: addNewTodo" id="Save">
                                        <span class="glyphicon  glyphicon glyphicon-floppy-disk"
                                            aria-hidden="true"></span>
                                        Save
                                    </button>

                                    <button type="button" class="btn btn-warning btn-lg ms-2"
                                        data-bind="click:$root.updateTask " style="display:none;" id="Update">
                                        <span class="glyphicon  glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                        Update
                                    </button>

                                    <button type="reset" class="btn btn-warning btn-lg ms-2" id="Clear">
                                        <span class="glyphicon  glyphicon glyphicon-refresh" aria-hidden="true"></span>
                                        Clear
                                    </button>
                                </form>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <div class="container" style="margin-top: 7%;">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <span class="glyphicon  glyphicon glyphicon-zoom-in" aria-hidden="true"></span> <b>Todo List</b>
                    </div>
                    <div class="panel-heading" style="font-size: large; ">
                        <span class="glyphicon  glyphicon glyphicon-zoom-in" aria-hidden="true"></span> <b><a
                                href="pendingTasks">All Tasks</a></b>&nbsp;
                        <span class="glyphicon  glyphicon glyphicon-zoom-in" aria-hidden="true"></span> <b><a
                                href="pendingTasks">Pending Tasks </a></b>
                        <span class="glyphicon  glyphicon glyphicon-zoom-in" aria-hidden="true"></span> <b><a
                                href="completedTasks">Completed Tasks</a></b>
                    </div>

                    <div class="panel-body">
                        <div class="table-responsive">
                            <table id="myTable" class="display table" width="100%">

                                <thead>
                                    <tr>
                                        <th>Todo Name</th>
                                        <th>Description</th>
                                        <th>Start Date</th>
                                        <th>Completion Date</th>
                                        <th>Priority</th>
                                        <th>Status</th>
                                        <th>Edit </th>
                                        <th>Delete</th>
                                        <th>Change Status</th>
                                    </tr>
                                </thead>

                                <tbody data-bind="foreach:taskList">
                                    <tr>
                                        <td> <span data-bind="text: todoName"></span> </td>
                                        <td> <span data-bind="text: description"></span></td>
                                        <td> <span data-bind="text: startDate"></span></td>
                                        <td> <span data-bind="text: completionDate"></span></td>
                                        <td> <span data-bind="text: priority"></span> </td>
                                        <td> <span data-bind="text: status,text: status?'Completed':'Pending'"></span>
                                        </td>
                                        <td><button type="button" class="btn-xs" data-bind="click : $root.detailedTask">
                                                <span class="glyphicon  glyphicon glyphicon-pencil"
                                                    aria-hidden="true"></span>
                                            </button></td>
                                        <td>
                                            <button type="button" data-bind="click : $root.deleteTask"
                                                class="btn btn-danger btn-xs">
                                                <span class="glyphicon glyphicon glyphicon-trash" aria-hidden="true"
                                                    data-bind="click: $root.deleteCustomer"></span>
                                            </button>
                                        </td>
                                        <td>
                                            <input type="checkbox"
                                                data-bind="checked:status, click : $root.changeStatus"
                                                class="btn-warning" />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="../JS/TodoPage.js"></script>
    <script>
        $(document).ready(function () {
            var obj = JSON.parse(sessionStorage.getItem("currentUser"))
            if (obj == null || obj == undefined) {
                window.location.href = '../HTML/LoginPage.html'
            }

        })
        function logout() {
            sessionStorage.removeItem("currentUser");
            window.location.href = '../HTML/LoginPage.html'
            return true;
        }

        $(document).ready(function () {
            var dtToday = new Date();

            var month = dtToday.getMonth() + 1;
            var day = dtToday.getDate();
            var year = dtToday.getFullYear();
            if (month < 10)
                month = '0' + month.toString();
            if (day < 10)
                day = '0' + day.toString();

            var maxDate = year + '-' + month + '-' + day;
            $('#myDate').attr('min', maxDate);
        });
    </script>
</body>
</html>